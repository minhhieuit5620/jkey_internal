@{
    ViewData["Title"] = "Configuration Information";
}
    <div class="pagetitle">
    <h1>Configuration Information</h1>
    </div><!-- End Page Title -->

    <section class="section">

        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Configuration Information</h5>

                <!-- Vertical Form -->
                <form class="row g-3">
                    <div class="col-sm-5 col-xs-12">
                        <label for="inputConfigName" class="form-label">Config Name</label>
                    <input type="text" class="form-control" id="inputConfigName">
                    </div>
                    <div class="col-sm-5 col-xs-12">
                        <label for="inputConfigType" class="form-label">Config Type</label>
                    <input type="text" class="form-control" id="inputConfigType">
                    </div>
                    <div class="col-sm-8 col-xs-12">
                        <label for="inputConfigValue" class="form-label">Config Value</label>
                    <input type="text" class="form-control" id="inputConfigValue">
                    </div>
                    <div class="col-sm-2 col-xs-12">
                        <label for="selectStatus" class="form-label">Status</label>
                    <select class="form-select" id="selectStatus"  required="">
                            <option selected="true" value="true">Active</option>
                            <option value="false">Inactive</option>
                        </select>
                    </div>
                    <div class="col-sm-12 col-xs-12">
                        <label for="textareaConfigDes" class="form-label">Config Description</label>
                        <div class="col-sm-10 col-xs-12 ">
                        <textarea id="textareaConfigDes" class="form-control" style="height: 100px"></textarea>
                        </div>
                    </div>
                    <div>
                    <button type="button" class="btn btn-primary" onclick="addSys()">Save</button>
                        <button type="reset" class="btn btn-secondary ">
                            <a href="/api/SystemConfig/SystemConfiguration">
                                Back
                            </a>                                                       
                        </button>
                    </div>
                </form>

            </div>
        </div>

    </section>


    
@section Scripts{
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

    <script>

        window.onload = (event) => {
           
            const queryString = window.location.search;
            debugger;
            var arr=queryString.split('/');
            var id = arr[arr.length];
            console.log("abc",arr);
            //var id1=id[0];
            console.log(id);


            // $.ajax({
            //    url: "/api/SystemConfig/"+id,
            //    data: ,
            //    type: "POST",
            //    contentType: "application/json;charset=utf-8",
            //    dataType: "json",
            //    success: function (result) {
            //       alert("success")
            //    },
            //});
        };

        function addSys(){
            var configName = document.getElementById("inputConfigName").value;
            var inputValue = document.getElementById("inputConfigValue").value;
            var inputType = document.getElementById("inputConfigType").value;
            var inputStatus = document.getElementById("selectStatus").value;
            var status
            if (inputStatus=="true"){
                status=true;
            }else{
                status=false;
            }
            var inputConfigDes = document.getElementById("textareaConfigDes").value;


            var sysObj = {
                name: configName,
                value: inputValue,
                type: inputType,
                active: status,
                description: inputConfigDes
            };
           

        }

        function getAllUrlParams(url) {
            var queryString = url ? url.split('?')[1] : window.location.search.slice(1);
            var obj = {};

            if (queryString) {
                queryString = queryString.split('#')[0];
                var arr = queryString.split('&');

                for (var i = 0; i < arr.length; i++) {
                    var a = arr[i].split('=');
                    var paramName = a[0];
                    var paramValue = typeof (a[1]) === 'undefined' ? true : a[1];

                    paramName = paramName.toLowerCase();
                    if (typeof paramValue === 'string') paramValue = paramValue.toLowerCase();

                    if (paramName.match(/\[(\d+)?\]$/)) {
                        var key = paramName.replace(/\[(\d+)?\]/, '');
                        if (!obj[key]) obj[key] = [];

                        if (paramName.match(/\[\d+\]$/)) {
                            var index = /\[(\d+)\]/.exec(paramName)[1];
                            obj[key][index] = paramValue;
                        } else {
                            obj[key].push(paramValue);
                        }
                    } else {
                        if (!obj[paramName]) {
                            obj[paramName] = paramValue;
                        } else if (obj[paramName] && typeof obj[paramName] === 'string') {
                            obj[paramName] = [obj[paramName]];
                            obj[paramName].push(paramValue);
                        } else {
                            obj[paramName].push(paramValue);
                        }
                    }
                }
            }

            return obj;
        }
        
    </script>
}

